Mediasite.namespace("Player"),Mediasite.Player.DisplayMessage=function(n){defaultOptions={title:"Mediasite Player",allowClose:!1},$.extend(defaultOptions,n),$("#MessageDisplay").messagedisplay(defaultOptions)},Mediasite.Player.CloseMessage=function(){$("#MessageDisplay").messagedisplay("close")},Mediasite.Player.CreatePopup=function(n,t,i,r,u,f){var e,o;return i=Math.floor(i),r=Math.floor(r),e="width="+i+",height="+r,e+=u?",scrollbars=yes":",scrollbars=no",e+=f?",resizable=yes":",resizable=no",o=window.open(n,t,e)},Mediasite.Player.AppPaths={PlayerView:"Javascript/Players/{0}/PlayerView.js",StyleSheet:"Javascript/Players/{0}/{1}",ThemedStyleSheet:"Javascript/Players/{0}/Themes/{1}/{2}"},Mediasite.Player.Register=function(n,t){Mediasite.Player.Register.Players[n]==undefined&&(Mediasite.Player.Register.Players[n]=t)},Mediasite.Player.Register.Players={},Mediasite.Player.RegisterExtension=function(n,t){Mediasite.Player.Register.Extensions[n]==undefined&&(Mediasite.Player.Register.Extensions[n]=t)},Mediasite.Player.Register.Extensions={},Mediasite.Player.PlayerState={NotReady:"NotReady",Waiting:"Waiting",InteractionRequired:"InteractionRequired",Playing:"Playing",Paused:"Paused",Stopped:"Stopped",Ended:"Ended",Error:"Error"},Mediasite.Player.PlayerType={None:"None",NewStandardPlayer:"NewStandardPlayer",PipPlayer:"PipPlayer",MiniPlayer:"MiniPlayer",StandardPlayer:"StandardPlayer",ScreenReader:"ScreenReader",ContentOnlyPlayer:"ContentOnlyPlayer",SmartPlayer:"SmartPlayer"},Mediasite.Player.ContentCapability={VideoAndSlides:0,MultiVideo:1},Mediasite.Player.PlayerPresentationStatus={None:0,Viewable:1,NotFound:2,Offline:3,Scheduled:4,NotYetAvailable:5,NotAuthorized:6},Mediasite.Player.PresentationStatus={NotAvailable:"NotAvailable",ScheduledForLive:"ScheduledForLive",OpenForLive:"OpenForLive",Live:"Live",LivePaused:"LivePaused",LiveEnded:"LiveEnded",OnDemand:"OnDemand"},Mediasite.Player.PopOutPlayer={Disabled:"False",FullExperience:"FullExperienceLayout",Automatic:"Automatic"},Mediasite.Player.SmartPopOutBehavior={Embedded:"Embedded",Never:"Never",Always:"Always"},Mediasite.Player.MediaPlayerType={Unknown:0,WindowsMedia:1,Port25:2,Silverlight:3,Flash:4,HTML5:5,HTML5Dash:6,GetDisplayName:function(n){switch(n){case this.WindowsMedia:return"WindowsMedia";case this.Port25:return"Port25";case this.Silverlight:return"Silverlight";case this.Flash:return"Flash";case this.HTML5:return"Html5";case this.HTML5Dash:return"Html5Dash";case this.Unknown:return"Unknown"}},Parse:function(n){if(typeof n=="undefined")return this.Unknown;switch(n.toLowerCase()){case"windowsmedia":return this.WindowsMedia;case"port25":return this.Port25;case"html5":return this.HTML5;case"silverlight":return this.Silverlight;case"flash":return this.Flash;default:return this.Unknown}}},Mediasite.Player.TimelineEvent={Unknown:0,Slide:1,PresentationStart:2,PresentationEnd:3,PauseStart:4,PauseEnd:5,TimedEvent:6},Mediasite.Player.MediaEventType={EndPresentation:"E",ShowSlide:"S",Pause:"P",Resume:"R"},Mediasite.Player.PlayerServiceFaultType={Unknown:0,InvalidTicket:1},Mediasite.Player.MediaState={Undefined:0,Stopped:1,Paused:2,Playing:3,ScanForward:4,ScanReverse:5,Buffering:6,Waiting:7,MediaEnded:8,Transitioning:9,Ready:10,Reconnecting:11,Closed:12,Error:13,Opening:14,GetDisplayName:function(n){switch(n){case this.Undefined:return Mediasite.Player.Localization.MediaPlayer.State.Undefined;case this.Stopped:return Mediasite.Player.Localization.MediaPlayer.State.Stopped;case this.Paused:return Mediasite.Player.Localization.MediaPlayer.State.Paused;case this.Playing:return Mediasite.Player.Localization.MediaPlayer.State.Playing;case this.ScanForward:return Mediasite.Player.Localization.MediaPlayer.State.ScanForward;case this.ScanReverse:return Mediasite.Player.Localization.MediaPlayer.State.ScanReverse;case this.Buffering:return Mediasite.Player.Localization.MediaPlayer.State.Buffering;case this.Waiting:return Mediasite.Player.Localization.MediaPlayer.State.Waiting;case this.MediaEnded:return Mediasite.Player.Localization.MediaPlayer.State.MediaEnded;case this.Transitioning:return Mediasite.Player.Localization.MediaPlayer.State.Transitioning;case this.Ready:return Mediasite.Player.Localization.MediaPlayer.State.Ready;case this.Reconnecting:return Mediasite.Player.Localization.MediaPlayer.State.Reconnecting;case this.Closed:return Mediasite.Player.Localization.MediaPlayer.State.Closed;case this.Error:return Mediasite.Player.Localization.MediaPlayer.State.Error;case this.Opening:return Mediasite.Player.Localization.MediaPlayer.State.Opening;default:return Mediasite.Player.Localization.MediaPlayer.State.Unknown}},GetStringValue:function(n){switch(n){case this.Stopped:return"stopped";case this.Paused:return"paused";case this.Playing:return"playing";case this.ScanForward:return"scanforward";case this.ScanReverse:return"scanreverse";case this.Buffering:return"buffering";case this.Waiting:return"waiting";case this.MediaEnded:return"mediaended";case this.Transitioning:return"transitioning";case this.Ready:return"ready";case this.Reconnecting:return"reconnecting";case this.Closed:return"closed";case this.Error:return"error";case this.Opening:return"opening";case this.Undefined:default:return"undefined"}}},Mediasite.Player.Options={UserFromName:"UserFromName",UserFromEmail:"UserFromEmail",Volume:"Volume",SlideDisplay:"SlideDisplay",ShowSlideDescriptions:"ShowSlideDescriptions",UseScreenReader:"UseScreenReader",PlayerCapabilitiesError:"PlayerCapabilitiesError"},Mediasite.Player.SlideDisplayPref={List:0,SmallThumbs:4,LargeThumbs:5,Chapters:9},Mediasite.Player.TimingSearcher=function(n){this.GetCurrentItem=function(t){for(var r=-1,u=n.length,i;u-r>1;)if(i=u+r>>1,n[i].Time<t)r=i;else if(n[i].Time>t)u=i;else return n[i];return n[r]},this.UpdateTimings=function(t){n=t},this.GetTimings=function(){return n},this.GetStartIndex=function(t){for(var f=!0,i=n.length,u=-1,r;i-u>1;)n[r=i+u>>1].Time<t?u=r:i=r;return i}},Mediasite.Player.TimedEventRepository=function(n){function getArray(){var t=[];return $.each(i,function(n,i){t.push(i)}),n=t,n.sort(compare),n}function updateTimingSearcher(){var n=getArray();f.TimingSearcher.UpdateTimings(n)}function compare(n,t){return n.Time<t.Time?-1:n.Time>t.Time?1:0}var f=this,i={},t={},u=!0,r=0;$.each(n,function(n,t){i[t.Id]=t}),this.TimingSearcher=new Mediasite.Player.TimingSearcher(n),this.AddTimedEvents=function(n){$.each(n,function(n,t){i[t.Id]=t}),updateTimingSearcher()},this.GetAllTimedEvents=function(){return getArray()},this.GetTimedEvents=function(i){function getEventsForTime(i,r,u){for(i;i<n.length;i++){var f=n[i];if(f.Time>=r&&f.Time<u&&t[f.Id]==undefined&&(s.push(f),l[f.Id]=f,a=!0),f.Time>=u)break}}var c=parseInt(i.toFixed(0)),e=c,v=e+250,l={},s=[],a=!1,o,h;if(n.length==0)return s;if(o=0,e>0&&e<1e3&&u&&(getEventsForTime(o,0,e),u=!1),o=f.TimingSearcher.GetStartIndex(e),getEventsForTime(o,e,v),a){t={},r=c;for(h in l)t[h]=l[h]}else r+1e3<c&&(t={});return s}},Mediasite.Player.EventBundle=function(n){function addSpecializedFireMethods(n){for(var t,i=0,r=n.length;i<r;i++){if(t=n[i],typeof t!="string"||!isFunctionNameCompatible(t))throw{name:"InvalidEventName"};addSpecializedFireMethod(t)}}function addSpecializedFireMethod(n){i["fire_"+n]=function(){var t=Array.prototype.slice.apply(arguments);t.unshift(n),i.fire.apply(i,t)}}function isFunctionNameCompatible(n){return r.test(n)}function actOnEventDictionary(n,t){for(name in n)if(n.hasOwnProperty(name)){var i=n[name];typeof i=="function"&&t(name,i)}}function addSingleHandler(n,i){t[n]||(t[n]=$.Callbacks()),t[n].add(i)}function removeSingleHandler(n,i){t[n]&&t[n].remove(i)}var i=this,t={},r=/^[\w\$]+$/;$.isArray(n)&&addSpecializedFireMethods(n),this.addHandler=function(n,t){typeof n=="object"?actOnEventDictionary(n,addSingleHandler):addSingleHandler(n,t)},this.removeHandler=function(n,t){typeof n=="object"?actOnEventDictionary(n,removeSingleHandler):removeSingleHandler(n,t)},this.removeAllHandlers=function(){t={}},this.fire=function(n){if(t[n]){var i=Array.prototype.slice.call(arguments,1);t[n].fire.apply(t[n],i)}}},Mediasite.namespace("Player.FeatureAccess"),Mediasite.Player.FeatureAccess=function(){var n={};this.disable=function(t,i){n[t]=arguments.length==1||!!i},this.isDisabled=function(t){return n[t]===!0}},Mediasite.Player.PlayerStateManagerEvent={PlayerStateChanged:"PlayerStateChanged"},Mediasite.Player.ViewEvent={PreferenceChanged:"PreferenceChanged",LayoutLoaded:"LayoutLoaded",LayoutChanged:"LayoutChanged",FullScreen:"FullScreen",PopOut:"PopOut",PlayAsVideo:"PlayAsVideo",VisibleStreamsChanged:"VisibleStreamsChanged",TogglePlayPause:"TogglePlayPause",PositionChanged:"PositionChanged",SkipBack:"SkipBack",SkipForward:"SkipForward",PlaybackRateChanged:"PlaybackRateChanged",PlaybackRateFaster:"PlaybackRateFaster",PlaybackRateSlower:"PlaybackRateSlower",SlideChanged:"SlideChanged",PreviousSlide:"PreviousSlide",NextSlide:"NextSlide",FirstSlide:"FirstSlide",LastSlide:"LastSlide",ToggleSlideShow:"ToggleSlideShow",ShowSlideList:"ShowSlideList",ShowSlideSmallThumbs:"ShowSlideSmallThumbs",ShowSlideLargeThumbs:"ShowSlideLargeThumbs",ShowSlideText:"SlideShowText",ShowChapters:"ShowChapters",ChapterChanged:"ChapterChanged",AskQuestion:"AskQuestion",SendQuestion:"SendQuestion",OpenEmail:"OpenEmail",SendEmail:"SendEmail",ShowHelp:"ShowHelp",ShowInfo:"ShowInfo",ShowLinks:"ShowLinks",ShowPolls:"ShowPolls",ToggleCaptions:"ToggleCaptions",ToggleSearch:"ToggleSearch",Search:"Search",DismissPanels:"DismissPanels",ToggleScreenReader:"ToggleScreenReader",ToggleLogViewer:"ToggleLogViewer",VolumeUp:"VolumeUp",VolumeDown:"VolumeDown",VolumeChanged:"VolumeChanged",AudioLanguageChanged:"AudioLanguageChanged",Mute:"Mute",NextView:"NextView",PreviousView:"PreviousView",ToggleStageLightbox1:"ToggleStageLightbox1",ToggleStageLightbox2:"ToggleStageLightbox2",ToggleStageLightbox3:"ToggleStageLightbox3",ToggleStageLightbox4:"ToggleStageLightbox4",JumpForward:"JumpForward",JumpForwardMore:"JumpForwardMore",JumpForwardStatic:"JumpForwardStatic",JumpBack:"JumpBack",JumpBackMore:"JumpBackMore",JumpBackStatic:"JumpBackStatic",ShortcutsList:"ShortcutsList"},Mediasite.Player.ViewEvent.fromKeyEvent=function(n){if(n.keyCode==27||n.target.tagName!="INPUT"&&n.target.tagName!="TEXTAREA")switch(n.keyCode){case 27:return Mediasite.Player.ViewEvent.DismissPanels;case 32:return n.target.tagName=="BUTTON"?void 0:Mediasite.Player.ViewEvent.TogglePlayPause;case 37:if(n.ctrlKey&&!n.altKey&&!n.shiftKey)return Mediasite.Player.ViewEvent.PreviousSlide;break;case 38:return n.ctrlKey||n.shiftKey?Mediasite.Player.ViewEvent.VolumeUp:Mediasite.Player.ViewEvent.PlaybackRateFaster;case 39:if(n.ctrlKey&&!n.altKey&&!n.shiftKey)return Mediasite.Player.ViewEvent.NextSlide;break;case 40:return n.ctrlKey||n.shiftKey?Mediasite.Player.ViewEvent.VolumeDown:Mediasite.Player.ViewEvent.PlaybackRateSlower;case 65:return Mediasite.Player.ViewEvent.AskQuestion;case 67:return n.shiftKey?Mediasite.Player.ViewEvent.ToggleCaptions:Mediasite.Player.ViewEvent.ShowChapters;case 69:return Mediasite.Player.ViewEvent.OpenEmail;case 70:return Mediasite.Player.ViewEvent.ToggleSearch;case 72:case 112:return Mediasite.Player.ViewEvent.ShowHelp;case 73:return Mediasite.Player.ViewEvent.ShowInfo;case 76:return n.ctrlKey&&n.shiftKey&&n.altKey?Mediasite.Player.ViewEvent.ToggleLogViewer:Mediasite.Player.ViewEvent.ShowLinks;case 77:return Mediasite.Player.ViewEvent.Mute;case 80:return Mediasite.Player.ViewEvent.ShowPolls;case 81:if(n.ctrlKey)return Mediasite.Player.ViewEvent.ShortcutsList;break;case 83:return n.shiftKey?Mediasite.Player.ViewEvent.ShowSlideText:Mediasite.Player.ViewEvent.ToggleSlideShow;case 90:if(n.ctrlKey)return Mediasite.Player.ViewEvent.ToggleScreenReader;break;case 188:return Mediasite.Player.ViewEvent.PreviousView;case 190:return Mediasite.Player.ViewEvent.NextView;case 189:return Mediasite.Player.ViewEvent.VolumeDown;case 187:return Mediasite.Player.ViewEvent.VolumeUp;case 219:if(!n.ctrlKey&&!n.altKey&&!n.shiftKey)return Mediasite.Player.ViewEvent.JumpBack;if(!n.ctrlKey&&!n.altKey&&n.shiftKey)return Mediasite.Player.ViewEvent.JumpBackMore;if(n.ctrlKey&&!n.altKey&&!n.shiftKey)return Mediasite.Player.ViewEvent.JumpBackStatic;break;case 221:if(!n.ctrlKey&&!n.altKey&&!n.shiftKey)return Mediasite.Player.ViewEvent.JumpForward;if(!n.ctrlKey&&!n.altKey&&n.shiftKey)return Mediasite.Player.ViewEvent.JumpForwardMore;if(n.ctrlKey&&!n.altKey&&!n.shiftKey)return Mediasite.Player.ViewEvent.JumpForwardStatic;break;case 49:return Mediasite.Player.ViewEvent.ToggleStageLightbox1;case 50:return Mediasite.Player.ViewEvent.ToggleStageLightbox2;case 51:return Mediasite.Player.ViewEvent.ToggleStageLightbox3;case 52:return Mediasite.Player.ViewEvent.ToggleStageLightbox4}},Mediasite.Player.DisableableEventBundle=function(n){var t=new Mediasite.Player.EventBundle(n),i;return $.extend(t,new Mediasite.Player.FeatureAccess),i=t.fire,t.fire=function(n){t.isDisabled(n)||i.apply(t,[].slice.call(arguments))},t.disableCommonViewEvents=function(n,i,r){var u=Mediasite.Player.ViewEvent,f=n=n||{},h=i=i||{},e,a,v,o,s,c,l;r=r||{},t.disable(u.TogglePlayPause,f.AllowPlayPauseStop===!1),t.disable(u.PositionChanged,f.AllowScrubbing===!1),t.disable(u.SkipBack,f.AllowScrubbing===!1||f.AllowSkipback===!1),t.disable(u.SkipForward,f.AllowScrubbing===!1||f.AllowSkipForward===!1),e=f.AllowScrubbing===!1||f.ShowSlideNavigation===!1,t.disable(u.SlideChanged,e),t.disable(u.PreviousSlide,e),t.disable(u.NextSlide,e),t.disable(u.LastSlide,e),t.disable(u.FirstSlide,e),a=f.AllowScrubbing===!1||f.AllowChapterNavigation===!1,t.disable(u.ChapterChanged,a),t.disable(u.ShowChapters,a),v=f.AllowScrubbing===!1||f.EnableSearch===!1,t.disable(u.ToggleSearch,v),t.disable(u.Search,v),o=f.AllowSpeedControl===!1||!Mediasite.Player.Support.playbackRate||r.CanChangeSpeed===!1,t.disable(u.PlaybackRateChanged,o),t.disable(u.PlaybackRateFaster,o),t.disable(u.PlaybackRateSlower,o),t.disable(u.LayoutChanged,f.AllowLayoutAdjustment===!1),s=f.AllowVolumeControl===!1||!Mediasite.Player.Support.volume,t.disable(u.VolumeChanged,s),t.disable(u.VolumeUp,s),t.disable(u.VolumeDown,s),t.disable(u.ToggleCaptions,f.AllowClosedCaptions===!1||h.DisableCaptionDisplay===!0),c=f.AllowAskQuestion===!1||h.ForumEnabled===!1,t.disable(u.AskQuestion,c),t.disable(u.SendQuestion,c),t.disable(u.ShowLinks,f.AllowLinks===!1),t.disable(u.ShowHelp,f.AllowHelp===!1),t.disable(u.ShowPolls,f.AllowPolls===!1||h.PollingEnabled===!1),t.disable(u.ShowInfo,f.EnablePresentationInfo===!1),l=f.AllowShare===!1||h.SharingEnabled===!1,t.disable(u.OpenEmail,l),t.disable(u.SendEmail,l)},t},Mediasite.Player.ModelEvent={PresentationLoaded:"PresentationLoaded",InactivityExceeded:"InactivityExceeded",EmailInviteLoaded:"EmailInviteLoaded",OptionsLoaded:"OptionsLoaded",StartMedia:"StartMedia",AddNewSlide:"AddNewSlide",CaptionChange:"CaptionChange",PositionChange:"PositionChange",SendQuestionComplete:"SendQuestionComplete",SendEmailComplete:"SendEmailComplete",SearchComplete:"SearchComplete",SearchError:"SearchError",LiveStatusChanged:"LiveStatusChanged",SetLiveStartTime:"SetLiveStartTime",RetrieveBookmark:"RetrieveBookmark",MediaError:"MediaError",ChapterChange:"ChapterChange",TimedEventReached:"TimedEventReached",PlayerStateChanged:"PlayerStateChanged",VisibleStreamsChanged:"VisibleStreamsChanged"},Mediasite.Player.BaseView=function(){return{SetFeatureAccess:function(){},AddEventHandler:function(){},LoadLayout:function(){},LoadNewOptions:function(){},UpdatePresentationData:function(){},UpdateMediaInfo:function(){},UpdateMediaState:function(){},UpdatePlayerState:function(){},UpdateMediaVolume:function(){},UpdateMediaFidelity:function(){},UpdatePlaybackRate:function(){},UpdatePosition:function(){},UpdateEmailInvite:function(){},UpdateOptions:function(){},UpdateCurrentSlide:function(){},UpdateCurrentCaption:function(){},UpdateSlideBrowserView:function(){},UpdateVisibleStreams:function(){},LiveStatusChange:function(){},InactivityExceeded:function(){},SendQuestionComplete:function(){},SendEmailComplete:function(){},ShowErrorMessage:function(){},ShowAskQuestionForm:function(){},ShowChapters:function(){},ShowLinks:function(){},ShowPolls:function(){},ShowHelp:function(){},ToggleSlideText:function(){},ToggleSlideBrowser:function(){},ToggleCaptionDisplay:function(){},ToggleSearch:function(){},DisplaySearchResults:function(){},DisplaySearchError:function(){},ShowInfo:function(){},MediaLoadStart:function(){},LaunchPopOut:function(){},GetLayoutElements:function(){},DismissPanels:function(){},GetStreamViewHandler:function(){},SlideStreamType:Mediasite.ContentStreamType.Slide,ChapterChanged:function(){}}},Mediasite.Player.BaseModel=function(){return{Initialiize:function(){},LoadMedia:function(){},ReportMediaOpened:function(){},ReportMediaView:function(){},UpdateBookmark:function(){},UpdateMediaInfo:function(){},HandleMediaEvent:function(){},HandleMediaError:function(){},UpdateMediaState:function(){},UpdatePlayerState:function(){},GetPlayerState:function(){},UpdateMediaVolume:function(){},UpdatePosition:function(){},SetCurrentSlide:function(){},SetInactivityTimeout:function(){},SetPreference:function(){},TogglePreference:function(){},NextSlide:function(){},PreviousSlide:function(){},FirstSlide:function(){},LastSlide:function(){},GetEmailInvite:function(){},SendQuestion:function(){},SendEmail:function(){},EnableLiveJumpBackDetection:function(){},EnableLiveStartDelay:function(){}}},Mediasite.Player.Support=new function(){function init(){window.Modernizr&&(Mediasite.BrowserDetect.Firefox()<27&&(this.csstransforms3d=Modernizr.csstransforms3d),this.localstorage=Modernizr.localstorage,this.touch=Modernizr.touch),Mediasite.BrowserDetect.IOS()||Mediasite.BrowserDetect.Android()||(this.volume=!0,this.playbackRate=!0),Mediasite.BrowserDetect.IOS()||Mediasite.BrowserDetect.Android()||Mediasite.BrowserDetect.Blackberry()||(this.multipleWindows=!0),window.navigator&&window.navigator.msPointerEnabled&&(this.msTouch=!0)}this.csstransforms3d=!1,this.localstorage=!1,this.touch=!1,this.msTouch=!1,this.volume=!1,this.playbackRate=!1,this.multipleWindows=!1,init.apply(this)},Mediasite.Player.TimeHelper={getDisplayFromDuration:function(n,t){var i,f,u,r;return n<0?"":(i=n,f=Math.floor(i/36e5),i=i-f*36e5,f<10&&(f="0"+f),u=Math.floor(i/6e4),i=i-u*6e4,r=Math.floor(i/1e3),i=i-r*1e3,u<10&&(u="0"+u),r<10&&(r="0"+r),isNaN(f)||isNaN(u)||isNaN(r))?t?"00:00:00":"00:00":f==="00"&&!t?u+":"+r:f+":"+u+":"+r},getDurationFromDisplay:function(n){for(var t=n.split(":"),r,i=0;i<t.length;i++)if(!this.isNumber(t[i])||t[i].length!=2||t[i]<0)return-1;r=0;switch(t.length){case 3:r=t[0]*36e5+t[1]*6e4+t[2]*1e3;break;case 2:r=t[0]*6e4+t[1]*1e3;break;case 1:r=t[0]*1e3}return r},isNumber:function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},Mediasite.Player.TimeHelper.Duration=function(n){function zeroPad(n,t){for(var i=n+"";i.length<t;)i="0"+i;return i}function digits(n){return n>0?(n+"").length:0}var t=n,u=Math.floor(t/36e5),i,r;return t=t-u*36e5,i=Math.floor(t/6e4),t=t-i*6e4,r=Math.floor(t/1e3),t=t-r*1e3,{hours:u,minutes:i,seconds:r,toString:function(n){n=n||this.recommendFormattingOptions();var t,u=":",r=this.minutes,i=this.hours;return n.hourAsMinutes&&(r+=this.hours*60,i=0),t=zeroPad(r,n.minuteDigits)+u+zeroPad(this.seconds,2),n.hourDigits>0&&(t=zeroPad(i,n.hourDigits)+u+t),t},recommendFormattingOptions:function(){var n={hourAsMinutes:!1,hourDigits:0,minuteDigits:0},t=this.hours*60+this.minutes;return t<=60?(n.hourAsMinutes=!0,n.hourDigits=0,n.minuteDigits=digits(t)):(n.hourAsMinutes=!1,n.hourDigits=digits(this.hours),n.minuteDigits=n.hourDigits>0?2:digits(this.minutes)),n.minuteDigits=Math.max(1,n.minuteDigits),n}}},Mediasite.ElementSelector=function(n){return n||(n=document.body),{element:function(){return $(n)},addSelectorMethods:function(n){for(var t in n)n.hasOwnProperty(t)&&this.addSelectionMethod(t,n[t])},addSelectionMethod:function(n,t){this[n]=function(){return this.element().find(t)}}}},Mediasite.namespace("MediaPlayer"),Mediasite.MediaPlayer.ModelEvent={MediaError:"MediaError",MediaLoadStart:"MediaLoadStart",MediaLoaded:"MediaLoaded",MediaUpdated:"MediaUpdated",MediaStarted:"MediaStarted",MediaEvent:"MediaEvent",MediaView:"MediaView",StateChanged:"StateChanged",VolumeChanged:"VolumeChanged",MediaFidelityChanged:"MediaFidelityChanged",PlaybackRateChanged:"PlaybackRateChanged",PositionChanged:"PositionChanged",EnableLiveJumpBackDetection:"EnableLiveJumpBackDetection",EnableLiveStartDelay:"EnableLiveStartDelay"},Mediasite.MediaPlayer.BaseModel=function(){return{SetupMediaElement:function(){},LiveStatusChange:function(){},InactivityExceeded:function(){},UpdateOptions:function(){},SetPosition:function(){},SetAudioLanguage:function(){},SetVolume:function(){},SkipBack:function(){},SkipForward:function(){},PlayFaster:function(){},PlaySlower:function(){},TogglePlayPause:function(){},ToggleMute:function(){},FullScreen:function(){},SetLiveStartTime:function(){},RetrieveBookmark:function(){},SupportsPlayAsVideo:function(){},GetMediaWrapper:function(){}}},Mediasite.MediaPlayer.BaseView=function(){return{CreateMediaElement:function(){},UpdateMediaInfo:function(){},MediaLoadStart:function(){}}},Mediasite.namespace("Player.Error"),Mediasite.Player.Error.Code={MethodNotFound:410,MethodError:411,MediaError:510,MediaNotSupported:511,PlayerNotReady:520},Mediasite.Player.Error.Description={410:"API method not found",411:"Error while calling API method",500:"Could not load presentation metadata",510:"Problem with presentation media",511:"Presentation media is not supported",520:"Player not ready"},Mediasite.Player.MediaPlugins={None:0,WindowsMedia:1,Silverlight:2,HTML5:4,Flash:8,Port25:16,Hls:32,Silverlight4:64,HTML5Dash:128,Parse:function(n){if(typeof n=="undefined")return this.None;switch(n.toLowerCase()){case"windowsmedia":return this.WindowsMedia;case"port25":return this.Port25;case"html5":case"hls":return this.HTML5;case"silverlight":return this.Silverlight;case"html5dash":return this.HTML5Dash;case"flash":return this.Flash;default:return this.None}},GetDisplayNames:function(n){if(!n)return["None"];var t=[];return n&this.WindowsMedia&&t.push("WindowsMedia"),n&this.Silverlight&&t.push("Silverlight"),n&this.Flash&&t.push("Flash"),n&this.HTML5&&t.push("HTML5"),n&this.Port25&&t.push("Port25"),n&this.Hls&&t.push("Hls"),n&this.HTML5Dash&&t.push("HTML5Dash"),t}},Mediasite.Player.MimeTypes={WMV:"video/x-ms-wmv",MP4:"video/mp4",SS:"video/x-mp4-fragmented",M3U:"audio/x-mpegurl",Dash:"application/dash+xml"},Mediasite.Player.ServerTypes={IIS:"IIS",WMS:"WMS"},Mediasite.Player.MediaTypes={MP4:"MP4",WMV:"WMV",SS:"SS"},Mediasite.Player.PlaybackOptions=function(n,t){function getStartPosition(){var r=0,f,u;try{r=parseInt(Mediasite.GetQueryParam("playFrom"),10),isNaN(r)&&!isLive(n)&&(f=new Mediasite.Player.BookmarkStore(n.PresentationId,n.Duration,!1,n.ServerClockSkew,i),u=f.retrieve(),t||(t={savedAt:0,position:0}),r=t.savedAt>u.savedAt?t.position:u.position)}catch(e){}return r}function getAutoStart(){var n=undefined,t=Mediasite.GetQueryParam("autoStart").toLowerCase();return t==="true"?n=!0:t==="false"&&(n=!1),n==undefined&&(n=!Mediasite.BrowserDetect.Embedded()),n}function getPauseAt(){var t=-1,n;try{n=parseInt(Mediasite.GetQueryParam("duration"),10),isNaN(n)||(t=i.StartPosition+n)}catch(r){}return t}function isLive(){return n.PlayStatus?n.PlayStatus.indexOf("Live")>=0:!1}function loadOptions(){i.StartPosition=getStartPosition(),i.AutoStart=getAutoStart(),i.PauseAt=getPauseAt()}this.StartPosition=0,this.AutoStart=!0,this.PauseAt=-1;var i=this;$(function(){loadOptions()})},Mediasite.Player.UserPreferences=function(){var n=new Mediasite.Cookie("MediasitePlayerOptions");this.GetValue=function(t,i){return n.GetValue(t,i)},this.GetBoolValue=function(t,i){return n.GetBoolValue(t,i)},this.SetValue=function(t,i){n.SetValue(t,i)},this.ToggleValue=function(t){var i=n.GetBoolValue(t,!1);this.SetValue(t,!i)},this.GetAll=function(){return n.GetAll()}},Mediasite.Player.SlideImage=function(n,t){var r=t,i=n;this.getSlideNumber=function(){return i},this.getFullUrl=function(){return r.GetSlideUrl(i)},this.getCacheFriendlyUrl=function(n,t){return r.GetCacheFriendlySlideUrl(i,n,t)}},Mediasite.Player.SpecialSlideImage=function(n){return{getSlideNumber:function(){return 0},getFullUrl:function(){return n},getCacheFriendlyUrl:function(){return n}}},Mediasite.Player.DetectPlayerContentPlugin=function(n){function pluginDetect(){function detectSL(){if(!Mediasite.BrowserDetect.Chrome())try{window.Silverlight&&Silverlight.isInstalled(f)&&(i=i|r.Silverlight)}catch(n){}}function detectSL4(){if(!Mediasite.BrowserDetect.Chrome())try{window.Silverlight&&Silverlight.isInstalled("4")&&(i=i|r.Silverlight4)}catch(n){}}function detectFlash(){try{var u=Mediasite.BrowserDetect.Chrome(),t=Mediasite.BrowserDetect.Edge(),n=navigator.mimeTypes&&typeof navigator.mimeTypes["application/x-shockwave-flash"]!="undefined";(u||t)&&n&&(i=i|r.Flash)}catch(f){}}function detectWMP(){var n,t;try{if(window.ActiveXObject!==undefined)try{t=new ActiveXObject("WMPlayer.OCX.7"),i=i|r.WindowsMedia,t=null;return}catch(f){}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1)for(n=0;n<navigator.plugins.length;n=n+1)if(navigator.plugins[n].filename==="np-mswmp.dll"){i=i|r.WindowsMedia|r.Port25;return}}catch(u){}}function detectHTML5(){try{var t=document.createElement("video"),n=t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');(n==="probably"||n==="maybe")&&(i=i|r.HTML5)}catch(u){}}function detectHTML5Dash(){try{if(!n.GlobalOptions.EnableExperimentalDashPlayback)return;if(!!window.MediaSource){var u=document.createElement("video"),t=u.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');(t==="probably"||t==="maybe")&&(i=i|r.HTML5Dash)}}catch(f){}}function detectHLS(){try{var u=document.createElement("video"),t=u.canPlayType("application/x-mpegurl"),e=t==="probably"||t==="maybe",n=u.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),f=n==="probably"||n==="maybe";e&&f&&!Mediasite.BrowserDetect.Edge()&&(i=i|r.Hls)}catch(o){}}function writeCookieData(){var r="ClientPlugins="+i+"&DesiredPlugins="+t+"&CompatiblePlugins="+u,n=e+"="+r;document.cookie=n}function detectClientCapabilities(){detectSL(),detectSL4(),detectFlash(),detectWMP(),detectHTML5(),detectHTML5Dash(),detectHLS()}var r=Mediasite.Player.MediaPlugins,i=r.None,e="MediasitePlayerCaps",f="5.0.61118.0";return detectClientCapabilities(),writeCookieData(),i}function getPluginsForPresentationMedia(){if(n.GlobalOptions.IsLayoutPreview)return Mediasite.Player.MediaPlugins.HTML5;for(var t=Mediasite.Player.MediaPlugins.None,r=getVideoUrls(),i=0;i<r.length;i++)switch(r[i].MimeType){case Mediasite.Player.MimeTypes.WMV:t=t|Mediasite.Player.MediaPlugins.WindowsMedia|Mediasite.Player.MediaPlugins.Silverlight;break;case Mediasite.Player.MimeTypes.MP4:t=t|Mediasite.Player.MediaPlugins.Silverlight|Mediasite.Player.MediaPlugins.HTML5;break;case Mediasite.Player.MimeTypes.SS:t=t|Mediasite.Player.MediaPlugins.Silverlight,isFlashPlaybackPossibleForBrowser()&&(t=t|Mediasite.Player.MediaPlugins.Flash);break;case Mediasite.Player.MimeTypes.Dash:n.GlobalOptions.EnableExperimentalDashPlayback&&(t=t|Mediasite.Player.MediaPlugins.HTML5Dash);break;case Mediasite.Player.MimeTypes.M3U:t=t|Mediasite.Player.MediaPlugins.Hls}return t}function getDesiredPlugins(){var n=Mediasite.Player.MediaPlugins.None,u=Mediasite.GetQueryParam("useWMP",Mediasite.GetQueryParam.AsBool),f=Mediasite.GetQueryParam("useSilverlight",Mediasite.GetQueryParam.AsBool),r=Mediasite.GetQueryParam("useFlash",Mediasite.GetQueryParam.AsBool),t=Mediasite.GetQueryParam("useHTML5",Mediasite.GetQueryParam.AsBool),i=Mediasite.GetQueryParam("useHtml5Dash",Mediasite.GetQueryParam.AsBool);return u===!0&&(n=n|Mediasite.Player.MediaPlugins.WindowsMedia|Mediasite.Player.MediaPlugins.Port25),f===!0&&(n=n|Mediasite.Player.MediaPlugins.Silverlight),r===!0&&(n=n|Mediasite.Player.MediaPlugins.Flash),t===!0&&(n=n|Mediasite.Player.MediaPlugins.HTML5|Mediasite.Player.MediaPlugins.Hls),i===!0&&(n=n|Mediasite.Player.MediaPlugins.HTML5Dash),n}function getVideoUrls(){var t=[];return typeof n.CurrentPresentation!="undefined"&&typeof n.CurrentPresentation.Streams!="undefined"&&$.each(n.CurrentPresentation.Streams,function(n,i){i.VideoUrls.length>0&&t.length==0&&(t=i.VideoUrls)}),t}function getPlayerContentPlugin(){function convertToMediaPlayerType(n){switch(n){case Mediasite.Player.MediaPlugins.WindowsMedia:return Mediasite.Player.MediaPlayerType.WindowsMedia;case Mediasite.Player.MediaPlugins.Port25:return Mediasite.Player.MediaPlayerType.Port25;case Mediasite.Player.MediaPlugins.Silverlight:return Mediasite.Player.MediaPlayerType.Silverlight;case Mediasite.Player.MediaPlugins.Flash:return Mediasite.Player.MediaPlayerType.Flash;case Mediasite.Player.MediaPlugins.HTML5:return Mediasite.Player.MediaPlayerType.HTML5;case Mediasite.Player.MediaPlugins.HTML5Dash:return Mediasite.Player.MediaPlayerType.HTML5Dash;default:return Mediasite.Player.MediaPlayerType.Unknown}}var f=[],c=!1,t,o,l,s,e,u,i,h;if(n.GlobalOptions.IsLayoutPreview||(c=n.CurrentPresentation.PlayStatus.indexOf("Live")>=0),f=c?[{Rank:1,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.SS,PluginType:Mediasite.Player.MediaPlugins.Silverlight,MimeType:Mediasite.Player.MimeTypes.SS},{Rank:2,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.SS,PluginType:Mediasite.Player.MediaPlugins.Flash,MimeType:Mediasite.Player.MimeTypes.SS},{Rank:3,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.MP4,PluginType:Mediasite.Player.MediaPlugins.HTML5,MimeType:Mediasite.Player.MimeTypes.M3U},{Rank:4,ServerType:Mediasite.Player.ServerTypes.WMS,MediaType:Mediasite.Player.MediaTypes.WMV,PluginType:Mediasite.Player.MediaPlugins.WindowsMedia,MimeType:Mediasite.Player.MimeTypes.WMV},{Rank:5,ServerType:Mediasite.Player.ServerTypes.WMS,MediaType:Mediasite.Player.MediaTypes.WMV,PluginType:Mediasite.Player.MediaPlugins.Silverlight,MimeType:Mediasite.Player.MimeTypes.WMV}]:[{Rank:1,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.MP4,PluginType:Mediasite.Player.MediaPlugins.HTML5,MimeType:Mediasite.Player.MimeTypes.MP4},{Rank:2,ServerType:Mediasite.Player.ServerTypes.WMS,MediaType:Mediasite.Player.MediaTypes.WMV,PluginType:Mediasite.Player.MediaPlugins.WindowsMedia,MimeType:Mediasite.Player.MimeTypes.WMV},{Rank:3,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.WMV,PluginType:Mediasite.Player.MediaPlugins.Silverlight,MimeType:Mediasite.Player.MimeTypes.WMV},{Rank:4,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.MP4,PluginType:Mediasite.Player.MediaPlugins.Silverlight,MimeType:Mediasite.Player.MimeTypes.MP4},{Rank:5,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.WMV,PluginType:Mediasite.Player.MediaPlugins.WindowsMedia,MimeType:Mediasite.Player.MimeTypes.WMV},{Rank:6,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.SS,PluginType:Mediasite.Player.MediaPlugins.Silverlight,MimeType:Mediasite.Player.MimeTypes.SS},{Rank:7,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.SS,PluginType:Mediasite.Player.MediaPlugins.Flash,MimeType:Mediasite.Player.MimeTypes.SS},{Rank:8,ServerType:Mediasite.Player.ServerTypes.IIS,MediaType:Mediasite.Player.MediaTypes.SS,PluginType:Mediasite.Player.MediaPlugins.HTML5Dash,MimeType:Mediasite.Player.MimeTypes.Dash},{Rank:9,ServerType:Mediasite.Player.ServerTypes.WMS,MediaType:Mediasite.Player.MediaTypes.WMV,PluginType:Mediasite.Player.MediaPlugins.Silverlight,MimeType:Mediasite.Player.MimeTypes.WMV}],n.GlobalOptions.IsLayoutPreview)return f[0];for(t=[],o=r,(r&Mediasite.Player.MediaPlugins.Port25)==Mediasite.Player.MediaPlugins.Port25&&(n.GlobalOptions.LayoutSupportsPort25||(o=r&~Mediasite.Player.MediaPlugins.WindowsMedia)),l=getVideoUrls(),s=0;s<l.length;s++)if(e=l[s],e.MimeType!=Mediasite.Player.MimeTypes.M3U||(o&Mediasite.Player.MediaPlugins.Hls)!=0)for(i=0;i<f.length;i++)u=f[i],e.ServerType==u.ServerType&&e.MediaType==u.MediaType&&(o&u.PluginType)==u.PluginType&&t.push(u);if(t.length>0){if(n.CurrentPresentation.PreferSmoothStreaming&&!c)for(i=0;i<t.length;i++)if(h=t[i],h.MediaType==Mediasite.Player.MediaTypes.SS){t=[],t.push(h);break}return t.sort(function(n,t){return parseInt(n.Rank)-parseInt(t.Rank)}),t[0].MediaPlayerType=convertToMediaPlayerType(t[0].PluginType),t[0].MediaPlayerType===Mediasite.Player.MediaPlayerType.WindowsMedia&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(t[0].MediaPlayerType=Mediasite.Player.MediaPlayerType.Port25),t[0]}return{Rank:0,ServerType:"",MediaType:"",PluginType:Mediasite.Player.MediaPlugins.None,MimeType:"",MediaPlayerType:convertToMediaPlayerType(0)}}function getErrorMessage(){var l=canShowSilverlight(),r="",f={},o,e,h,s,c;return f.SupportedPlugins=i,f.CompatiblePlugins=u,f.DesiredPlugins=t,f.UseScreenReader=n.GlobalOptions.UseScreenReader,o=Mediasite.Player.Localization.ClientDetection.ErrorPageClientLoadError,o.length>0&&(r+=o+"<br/>"),r+="</br>",r+=Mediasite.Player.Localization.ClientDetection.CompatiblePlugins,r+='</br><span class="boldText">',r+=getPluginString(f.CompatiblePlugins),r+="</span></br>",r+="</br>",r+=Mediasite.Player.Localization.ClientDetection.DetectedPlugins,r+='</br><span class="boldText">',r+=getPluginString(f.SupportedPlugins),r+="</span></br>",f.DesiredPlugins!=Mediasite.Player.MediaPlugins.None&&(r+="</br>",r+=Mediasite.Player.Localization.ClientDetection.RequestedPlugins,r+='</br><span class="boldText">',r+=getPluginString(f.DesiredPlugins),r+="</span></br>"),f.UseScreenReader&&(r+="</br>",r+=Mediasite.Player.Localization.ClientDetection.RequestedCapabilities,r+='</br><span class="boldText">',r+=Mediasite.Player.Localization.ClientDetection.ScreenReader,r+="</span></br>"),e=Mediasite.BrowserDetect.InternetExplorer(),e&&e>9&&(r+='</br><span class="boldText">',r+=Mediasite.Player.Localization.ClientDetection.Windows8,r+="</span></br>"),h=hasFlag(f.SupportedPlugins,Mediasite.Player.MediaPlugins.Silverlight4)&&!hasFlag(f.SupportedPlugins,Mediasite.Player.MediaPlugins.Silverlight),l&&h&&(r+="<p>"+Mediasite.Player.Localization.ClientDetection.UpgradeSilverlight+"</p>"),s=hasFlag(f.SupportedPlugins,Mediasite.Player.MediaPlugins.Flash),c=t!=Mediasite.Player.MediaPlugins.None&&!hasFlag(t,Mediasite.Player.MediaPlugins.Flash),!isFlashPlaybackPossibleForBrowser()||s||c||(r+=getEnableFlashMarkup()),r}function getEnableFlashMarkup(){var n=Mediasite.Player.Localization.ClientDetection.EnableFlashInChrome;return Mediasite.BrowserDetect.Edge()&&(n=Mediasite.Player.Localization.ClientDetection.EnableFlashInEdge),'<div class="enableFlash">'+n+"</div>"}function canShowSilverlight(){var n=!0;return hasFlag(i,Mediasite.Player.MediaPlugins.Silverlight)?n=!1:((Mediasite.BrowserDetect.Android()||Mediasite.BrowserDetect.IOS())&&(n=!1),Mediasite.BrowserDetect.Chrome()&&(n=!1),Mediasite.BrowserDetect.InternetExplorerARM()&&(n=!1),Mediasite.BrowserDetect.Edge()&&(n=!1),t==Mediasite.Player.MediaPlugins.None||hasFlag(t,Mediasite.Player.MediaPlugins.Silverlight)||(n=!1)),n}function isFlashPlaybackPossibleForBrowser(){return Mediasite.BrowserDetect.Chrome()&&!Mediasite.BrowserDetect.ChromeAndroid()||Mediasite.BrowserDetect.Edge()}function hasFlag(n,t){return(n&t)==t}function getPluginString(n){var t=[],i;return hasFlag(n,Mediasite.Player.MediaPlugins.WindowsMedia)&&t.push(Mediasite.Player.Localization.ClientDetection.WindowsMedia),hasFlag(n,Mediasite.Player.MediaPlugins.Silverlight)&&t.push(Mediasite.Player.Localization.ClientDetection.Silverlight),hasFlag(n,Mediasite.Player.MediaPlugins.Silverlight4)&&t.push(Mediasite.Player.Localization.ClientDetection.Silverlight4),hasFlag(n,Mediasite.Player.MediaPlugins.Flash)&&t.push(Mediasite.Player.Localization.ClientDetection.Flash),hasFlag(n,Mediasite.Player.MediaPlugins.HTML5)&&t.push(Mediasite.Player.Localization.ClientDetection.Html5),hasFlag(n,Mediasite.Player.MediaPlugins.HTML5Dash)&&t.push(Mediasite.Player.Localization.ClientDetection.Html5Dash),hasFlag(n,Mediasite.Player.MediaPlugins.Port25)&&t.push(Mediasite.Player.Localization.ClientDetection.Port25),hasFlag(n,Mediasite.Player.MediaPlugins.Hls)&&t.push(Mediasite.Player.Localization.ClientDetection.Hls),i=t.join(", "),i.length||(i=Mediasite.Player.Localization.ClientDetection.NoPlugins),i}function showMediaPlayerTypeLoadingError(){var f="5.0.61118.0",n,r,t;$("body").empty(),n=$('<div id="loadingDiv"></div>'),r=$('<div id="clientDetectMessage"></div>'),r.appendTo(n),r.html(getErrorMessage()),hasFlag(u,Mediasite.Player.MediaPlugins.Silverlight)&&!hasFlag(i,Mediasite.Player.MediaPlugins.Silverlight)&&canShowSilverlight()&&(t=$('<div id="SilverlightContainer"></div>'),t.appendTo(n),Silverlight.createObjectEx({properties:{version:f},parentElement:t.get(0),id:t.id,context:null})),$("body").css({textAlign:"center"}),n.css({fontSize:"16px",fontWeight:"normal",width:"650px",marginTop:"20px",padding:"20px",border:"2px solid #696969",color:"#333333",backgroundColor:"#E8E8E8",borderRadius:"10px",marginLeft:"auto",marginRight:"auto"}),n.appendTo("body")}var u=getPluginsForPresentationMedia(),t=getDesiredPlugins(),i=pluginDetect(),r=t==Mediasite.Player.MediaPlugins.None?i:i&t,o=getPlayerContentPlugin(),e,f;return o.MediaPlayerType===Mediasite.Player.MediaPlayerType.Unknown&&(e=$("#PluginRequiredMeta"),Mediasite.BrowserDetect.IEMetro()&&e.size()==0?(f=new Mediasite.Cookie(Mediasite.Player.Options.PlayerCapabilitiesError),f.SetValue(Mediasite.Player.Options.PlayerCapabilitiesError,!0),window.location.reload()):showMediaPlayerTypeLoadingError()),o},Mediasite.Player.Overlay=function(){var t=$(".LoadingOverlay"),n=$(".LoadingMessage");this.Show=function(){t.show()},this.Hide=function(){n.fadeOut(1e3,function(){t.hide()})},this.SetMessage=function(t){n.text(t)}},Mediasite.Player.PlayerStateManager=function(){function fireEvent(){var n=o.GetState(),i=!t||t.State!==n.State||t.IsLive!=n.IsLive;i&&(t={State:n.State,IsLive:n.IsLive},f.Debug("State: "+n.State,"IsLive: "+n.IsLive),r.fire(e.PlayerStateChanged,n))}var f=Mediasite.Logging.LoggerFactory("PlayerState"),r=new Mediasite.Player.EventBundle,e=Mediasite.Player.PlayerStateManagerEvent,o=this,n=Mediasite.Player.PlayerState.NotReady,u=Mediasite.Player.PresentationStatus.ScheduledForLive,i=!1,t;this.AddEventHandler=function(n,t){r.addHandler(n,t)},this.LiveStatusChange=function(t){i=!0,u=t;switch(t){case Mediasite.Player.PresentationStatus.ScheduledForLive:case Mediasite.Player.PresentationStatus.OpenForLive:n=Mediasite.Player.PlayerState.Waiting,fireEvent();break;case Mediasite.Player.PresentationStatus.LiveEnded:n=Mediasite.Player.PlayerState.Ended,fireEvent()}},this.MediaStateChange=function(t){if(i)switch(t){case Mediasite.Player.MediaState.Ready:n=Mediasite.Player.PlayerState.InteractionRequired;break;case Mediasite.Player.MediaState.Playing:n=Mediasite.Player.PlayerState.Playing;break;case Mediasite.Player.MediaState.Paused:n=Mediasite.Player.PlayerState.Paused;break;case Mediasite.Player.MediaState.Closed:case Mediasite.Player.MediaState.MediaEnded:case Mediasite.Player.MediaState.Stopped:if(u==Mediasite.Player.PresentationStatus.LiveEnded)n=Mediasite.Player.PlayerState.Ended;else if(n==Mediasite.Player.MediaState.NotReady)break;else n=Mediasite.Player.PlayerState.Stopped;break;default:n=Mediasite.Player.PlayerState.NotReady}else switch(t){case Mediasite.Player.MediaState.Ready:n=Mediasite.Player.PlayerState.InteractionRequired;break;case Mediasite.Player.MediaState.Playing:n=Mediasite.Player.PlayerState.Playing;break;case Mediasite.Player.MediaState.Paused:n=Mediasite.Player.PlayerState.Paused;break;case Mediasite.Player.MediaState.Closed:case Mediasite.Player.MediaState.MediaEnded:case Mediasite.Player.MediaState.Stopped:n=Mediasite.Player.PlayerState.Ended;break;default:n=Mediasite.Player.PlayerState.NotReady}fireEvent()},this.MediaError=function(){n=Mediasite.Player.PlayerState.Error,fireEvent()},this.GetState=function(){return{State:n,IsLive:i}}},Mediasite.Player.WindowInterface=function(n){var t,i;if(n||(n=window),this._concreteWindow=n,n.postMessage||(this._canPostMessage=!1),t=Mediasite.BrowserDetect.InternetExplorer(),t&&t<=7&&n.postMessage&&(t=8),t&&t<=7&&(this._canPostMessage=!1),t&&8<=t&&t<=9&&n!==window.parent&&(this._canPostMessage=!1),t&&t<=11&&Mediasite.BrowserDetect.Local()&&n!==window.parent&&(this._canPostMessage=!1),!this._canPostMessage)try{i=this._concreteWindow.document,this._canAccessWindowProperties=!0}catch(r){}},Mediasite.Player.WindowInterface.prototype={addHandler:function(n,t,i){if(!i){var r=t;t=function(n){r(n.originalEvent)}}$(this._concreteWindow).on(n,t)},removeHandler:function(n,t){$(this._concreteWindow).off(n,t)},_canPostMessage:!0,_canAccessWindowProperties:!1,postMessage:function(n,t){var i,r,u;if(this._canPostMessage)try{this._concreteWindow.postMessage(n,t);return}catch(f){t==="*"&&(this._canPostMessage=!1)}if(this._canAccessWindowProperties){try{i=this._concreteWindow.$}catch(f){}if(i){r=i.Event("message"),r.originalEvent={data:n,source:window,origin:"*"},u=i(this._concreteWindow),this._concreteWindow.setTimeout(function(){u.trigger(r)},1);return}}},equals:function(n){return this._concreteWindow==n},equalsInterface:function(n){return n.equals(this._concreteWindow)}}
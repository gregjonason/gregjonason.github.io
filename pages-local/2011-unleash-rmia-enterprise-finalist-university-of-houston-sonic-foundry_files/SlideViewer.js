if(!Mediasite)var Mediasite={};Mediasite.Player=Mediasite.Player||{},Mediasite.Player.SlideViewer=function(n,t){function init(){var o,e;for(r=$(n),r.css("-ms-touch-action","none"),g=t||new DummySlideUrlProvider,et=makeSpecialSlideInfo(new Mediasite.Slide(0,0,"Empty Slide",""),null,null),o=$('<div class="zoomhud" />').appendTo(r),i=new Mediasite.Player.ZoomHud(o),i.bind({zoominclicked:hud_zoominclicked,zoomoutclicked:hud_zoomoutclicked}),e=0;e<u;e++)f[e]=makePanel();makePanels(),layoutPanels(),startReturnForce(),r.bind("containerresize",element_resize)}function makePanels(){$(".panel",r).remove(),f=[];for(var n=0;n<u;n++)f[n]=makePanel()}function panel_grab(){d=!0,y=!0}function panel_drag(n,t){y=!1;var i=isRightmostSlide()&&t.offset<0||isLeftmostSlide()&&t.offset>0;k=i?Math.floor(t.offset/2):t.offset,layoutPanels()}function panel_release(n,t){if(y&&onTap(),!isInspectorMode()){var i=0,u=r.width()/2;getTotalOffset()>u?i=-1:getTotalOffset()<-u?i=1:t.swipeDirection===Mediasite.SwipeDirection.Right?i=-1:t.swipeDirection===Mediasite.SwipeDirection.Left&&(i=1),(isLeftmostSlide()&&i<0||isRightmostSlide()&&i>0)&&(i=0),setPanelOffset(o+k),k=0,shiftCurrentBy(i),d=!1}}function element_resize(n){n.preventPropagation&&n.preventPropagation(),layoutPanels(),forEachPanel(function(n){n.resize()})}function panel_zoomfactorchanged(){this===f[e].getElement().get(0)&&updateZoomHud()}function panel_capabilitieschanged(){this===f[e].getElement().get(0)&&updateZoomHud()}function hud_zoominclicked(){var i=f[e];i&&i.zoomIn()}function hud_zoomoutclicked(){var i=f[e];i&&i.zoomOut()}function onNavigate(n){r.trigger("navigate",{time:n})}function onTap(){r.trigger("tap")}function isInspectorMode(){return u===1}function updateSlideIndexBounds(){c=v?-1:0,a=b?s.length:s.length-1}function isRightmostSlide(){return h.getCurrentSlideIndex()===a}function isLeftmostSlide(){return h.getCurrentSlideIndex()===c}function assignSlidesToPanels(){forEachPanel(function(n,t){var u=toLogicalIndex(t),r=slideIndexForPanel(u),i;isValidSlideIndex(r)&&(i=getSlideInfo(r),i||alert(r),n.setSlideImage(i.image),n.setSlideToolTip(i.tooltip),n.setSlideAspectRatio(ft))})}function existsSlideForLogicalIndex(n){return isValidSlideIndex(slideIndexForPanel(n))}function slideIndexForPanel(n){return h.getCurrentSlideIndex()+n}function isValidSlideIndex(n){return n>=c&&n<=a}function getSlideInfo(n){var i=null,t,r;return n===-1?i=v:n===s.length?i=b:(t=s[n],t&&(r=t.Text?t.Text:Mediasite.Player.Localization.Common.Slide+" "+t.Number,r+=t.Description?" - "+t.Description:"",i={image:new Mediasite.Player.SlideImage(t.Number,g),tooltip:r,time:t.Time,link:null})),i||et}function makeSpecialSlideInfo(n,t,i){return n?{image:{getSlideNumber:function(){return n.Number},getFullUrl:function(){return t},getCacheFriendlyUrl:function(){return t}},tooltip:n.Text,time:n.Time,link:i}:null}function shiftCurrentBy(n){ut=h.getCurrentSlideIndex()+n,setCurrentPanelIndex(e+n),setPanelOffset(o+n*r.width()),assignSlidesToPanels(),layoutPanels()}function setCurrentPanelIndex(n){for(var t=n%u;t<0;)t+=u;t!==e&&(e=t,w=h.getCurrentSlideIndex(),updateZoomHud())}function updateZoomHud(){var n=f[e];i.getZoomFactor()!==n.getZoomFactor()&&i.setZoomFactor(n.getZoomFactor()),i.getZoomInEnabled()!=n.getCanZoomIn()&&i.setZoomInEnabled(n.getCanZoomIn()),i.getZoomOutEnabled()!=n.getCanZoomOut()&&i.setZoomOutEnabled(n.getCanZoomOut()),n.getCanZoomOut()?i.getIsExpanded()||i.expand(200):i.getIsExpanded()&&i.collapse(200),updateZoomZoomHudVisibility()}function updateZoomZoomHudVisibility(){if(!tt){hideZoomHud();return}if(!rt){l||showZoomHud();return}!getCanZoomOut()&&l?hideZoomHud():getCanZoomOut()&&!l&&showZoomHud()}function showZoomHud(){l=!0,i.getElement().stop(!0,!0).fadeIn(p)}function hideZoomHud(){l=!1,i.getElement().stop(!0,!0).fadeOut(p)}function getCanZoomOut(){var n=f[e];return n?n.getCanZoomOut():!1}function startReturnForce(){ot=window.setInterval(returnForceInterval_tick,20)}function returnForceInterval_tick(){if(!d&&o!==0){var i=1,f=r.width()/5,t=Math.abs(o),u=t/4,n=Math.min(Math.max(u,i),f);n=n>t?t:n,o<0&&(n=-n),setPanelOffset(o-n),layoutPanels()}}function forEachPanel(n){for(var t=0;t<u;t++)n(f[t],t)}function areTransformsAvailable(){return Mediasite.Player.Support.csstransforms3d}function layoutPanels(){forEachPanel(function(n,t){var e=toLogicalIndex(t),i,u,f;existsSlideForLogicalIndex(e)?(f=e*r.width()*1.05+getTotalOffset(),i=f+"px",u="0"):(i="200%",u="0"),areTransformsAvailable()?n.getElement().css(Mediasite.Css.getCssPropertyName("transform"),"translate3d("+i+", "+u+", 0)"):n.getElement().css({left:i,top:u})}),d||it||Math.abs(getTotalOffset())!==0||(w===h.getCurrentSlideIndex()&&(it=!0,onNavigate(getSlideInfo(w).time),it=!1),w=null)}function getTotalOffset(){return isInspectorMode()?0:o+k}function setPanelOffset(n){(o=n,o==0)&&forEachPanel(function(n,t){var i=toLogicalIndex(t);(i===-1&&getTotalOffset()<=0||i===1&&getTotalOffset()>=0)&&n.zoomAllOut()})}function makePanel(){var t=$("<div></div>").addClass(st).css({width:"100%",height:"100%",position:"absolute"}),n;return r.append(t),n=new Mediasite.Player.SlideViewerPanel(t),n.getElement().bind({"panel-grab":panel_grab,"panel-drag":panel_drag,"panel-release":panel_release,"panel-zoomfactorchanged":panel_zoomfactorchanged,"panel-capabilitieschanged":panel_capabilitieschanged}),n}function toLogicalIndex(n){var t=n-e;return t>nt?t-=u:t<-nt&&(t+=u),t}function DummySlideUrlProvider(){this.GetSlideUrl=function(){return null},this.GetCacheFriendlySlideUrl=function(){return null}}var h=this,r,g,st="panel",f=[],u=3,nt=Math.floor(u/2),e=0,o=0,k=0,ot=null,d=!1,s=[],ut=-1,c=0,a=0,ft=4/3,v=null,b=null,et=null,w=null,i,rt=!1,tt=!0,l=!0,p=0,it=!1,y;this.getPanelCount=function(){return u},this.setPanelCount=function(n){nt=Math.floor(n/2),u=nt*2+1,makePanels(),assignSlidesToPanels(),layoutPanels()},this.getSlideUrlProvider=function(){return g},this.setSlideUrlProvider=function(n){g=n,assignSlidesToPanels()},this.getSlides=function(){return s},this.setSlides=function(n){s=n,updateSlideIndexBounds(),assignSlidesToPanels(),layoutPanels()},this.getCurrentSlideIndex=function(){return Math.min(Math.max(ut,c),a)},this.setCurrentSlideIndex=function(n){ut=Math.min(a,Math.max(c,n)),assignSlidesToPanels(),layoutPanels()},this.getSlideAspectRatio=function(){return ft},this.setSlideAspectRatio=function(n){ft=n},this.getHasStartSlide=function(){!!v},this.setStartSlide=function(n,t,i){v=makeSpecialSlideInfo(n,t,i),updateSlideIndexBounds(),assignSlidesToPanels(),layoutPanels()},this.getHasEndSlide=function(){!!b},this.setEndSlide=function(n,t,i){b=makeSpecialSlideInfo(n,t,i),updateSlideIndexBounds(),assignSlidesToPanels(),layoutPanels()},this.getCanHideZoomHud=function(){return rt},this.setCanHideZoomHud=function(n){rt=n,updateZoomZoomHudVisibility()},this.getCanShowZoomHud=function(){return tt},this.setCanShowZoomHud=function(n){tt=n,updateZoomZoomHudVisibility()},this.getZoomHudVisibilityAnimationDuration=function(){return p},this.setZoomHudVisibilityAnimationDuration=function(n){p=n},y=!1,init()},Mediasite.Player.SlideViewerPanel=function(n){function init(){if(i=$(n).css(getSelectFocusDragCss()).css("overflow","hidden"),i.css("position")=="static"&&i.css("position","relative"),c=$('<div class="slideviewer-zoomable-slide" />').appendTo(i),u=new Mediasite.Player.ZoomableSlide(c),e=new Mediasite.Player.ZoomViewport(i),t=new Mediasite.Player.ZoomEngine,new Mediasite.Swipeable(n),e.bind({mousedragged:viewport_mousedragged,mousewheelup:viewport_mousewheelup,mousewheeldown:viewport_mousewheeldown,sizechanged:viewport_sizechanged,pinched:viewport_pinched}),u.bind("nativesizechanged",slide_nativesizechanged),t.bind({contentrectchanged:zoomEngine_contentrectchanged,capabilitieschanged:zoomEngine_capabilitieschanged,zoomfactorchanged:zoomEngine_zoomfactorchanged,overpan:zoomEngine_overpan}),window.navigator.msPointerEnabled){var r=i.get(0);r.addEventListener("MSPointerDown",element_touchstart),r.addEventListener("MSPointerMove",element_touchmove),r.addEventListener("MSPointerUp",element_touchend),r.addEventListener("MSPointerCancel",element_touchcancel),r.addEventListener("MSPointerOut",element_pointerout),r.addEventListener("MSPointerOver",element_pointerover)}else i.bind({touchstart:element_touchstart,touchmove:element_touchmove,touchend:element_touchend,touchcancel:element_touchcancel});i.bind("swipe",element_swipe),t.setViewportSize(e.getSize())}function viewport_mousedragged(n,i){var u=r+i.delta.x,e=r<0&&u>=0||r>0&&u<=0,f;e?(f=u,setDragOffset(0),t.pan(f,i.delta.y)):r!==0?(setDragOffset(u),t.pan(0,i.delta.y)):t.pan(i.delta.x,i.delta.y)}function viewport_mousewheelup(n,i){t.zoomIn(i.position)}function viewport_mousewheeldown(n,i){t.zoomOut(i.position)}function viewport_sizechanged(){t.setViewportSize(e.getSize())}function viewport_pinched(n,u){var e;if(u.scaleFactor!==1&&(!(u.scaleFactor>1)||t.getCanZoomIn())&&(!(u.scaleFactor<1)||t.getCanZoomOut()))if(Math.abs(r)<10)setDragOffset(0),t.zoom(u.position,u.scaleFactor);else{var h=u.position.x()-i.offset().left,s=u.scaleFactor-1,o=r<0?i.width():0,c=h-o,l=c*s,f=r-l;f=r<0?Math.min(f,0):Math.max(f,0),setDragOffset(f),e=new Mediasite.Geometry.Point(o,u.position.y()),t.zoom(e,u.scaleFactor)}}function slide_nativesizechanged(){t.setNativeSize(u.getNativeSize())}function zoomEngine_contentrectchanged(n,t){u.applyRect(t.rect,t.mayAnimate)}function zoomEngine_capabilitieschanged(){i.trigger("panel-capabilitieschanged"),i.css("cursor",t.getCanZoomOut()?"pointer":"default")}function zoomEngine_zoomfactorchanged(){i.trigger("panel-zoomfactorchanged")}function zoomEngine_overpan(n,t){isDragging()&&t.x!==0&&setDragOffset(r+Math.round(t.x))}function element_touchstart(n){isSingleTouch(n)&&(beginDragSession(),i.trigger("panel-grab"))}function element_touchmove(){}function element_touchend(){if(isDragging()){var t={offset:r,swipeDirection:Mediasite.SwipeDirection.None};o&&o.session===getCurrentDragSession()&&(t.swipeDirection=o.direction),endDragSession(),setDragOffset(0),i.trigger("panel-release",t)}}function element_touchcancel(n){element_touchend(n)}function element_swipe(n,t){r!=0&&t&&t.direction&&(t.direction===Mediasite.SwipeDirection.Left||t.direction===Mediasite.SwipeDirection.Right)&&(o={session:getCurrentDragSession(),direction:t.direction})}function element_pointerout(){h=setTimeout(element_touchend,50)}function element_pointerover(){clearTimeout(h)}function beginDragSession(){f=++s}function endDragSession(){f=null}function isDragging(){return typeof f=="number"}function getCurrentDragSession(){return f}function getSelectFocusDragCss(){var t=Mediasite.Css.getCssPropertyName,n={};return n[t("user-select")]="none",n[t("user-focus")]="ignore",n[t("user-drag")]="none",n}function setDragOffset(n){r=n,isDragging()&&i.trigger("panel-drag",{offset:r})}function isSingleTouch(n){if(window.navigator.msPointerEnabled)return n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&n.pointerType!=="mouse"&&n.isPrimary;var t=n.originalEvent;return t&&t.touches&&t.touches.length===1}var i,c,u,e,t,l=!1,r=0,o=null,h=null,s,f;this.getElement=function(){return i},this.getTotalDragOffset=function(){return r},this.getSlideImage=function(){return u.getSlideImage()},this.setSlideImage=function(n){u.setSlideImage(n)},this.getSlideToolTip=function(){return u.getToolTip()},this.setSlideToolTip=function(n){u.setToolTip(n)},this.getSlideAspectRatio=function(){return u.getAspectRatio()},this.setSlideAspectRatio=function(n){u.setAspectRatio(n)},this.getZoomFactor=function(){return t.getZoomFactor()},this.getCanZoomIn=function(){return t.getCanZoomIn()},this.getCanZoomOut=function(){return t.getCanZoomOut()},this.zoomAllOut=function(){t.getCanZoomOut()&&t.zoomAllOut()},this.zoomIn=function(){t.zoomIn()},this.zoomOut=function(){t.zoomOut()},this.resize=function(){t.setViewportSize(e.getSize())},s=0,f=null,init()},Mediasite.Swipeable=function(n){function init(){if(i=$(n),window.navigator.msPointerEnabled){var t=i.get(0);t.addEventListener("MSPointerDown",element_touchstart),t.addEventListener("MSPointerMove",element_touchmove),t.addEventListener("MSPointerUp",element_touchend),t.addEventListener("MSPointerCancel",element_touchcancel)}else i.bind({touchstart:element_touchstart,touchmove:element_touchmove,touchend:element_touchend,touchcancel:element_touchcancel})}function element_touchstart(n){if(isSingleTouch(n)){t=new Mediasite.SwipeTracker;var i=getSingleTouchPagePosition(n);t.reportPosition(i)}}function element_touchmove(n){if((n.preventDefault(),isSingleTouch(n))&&t){var i=getSingleTouchPagePosition(n);t.reportPosition(i)}}function element_touchend(n){var r,i;t&&(isSingleTouch(n)&&(r=getSingleTouchPagePosition(n),t.reportPosition(r)),i=t.getDetectedSwipe(),i!=Mediasite.SwipeDirection.None&&onSwipe(i),t=null)}function element_touchcancel(){t=null}function onSwipe(n){switch(n){case Mediasite.SwipeDirection.Up:i.trigger("swipeup");break;case Mediasite.SwipeDirection.Down:i.trigger("swipedown");break;case Mediasite.SwipeDirection.Left:i.trigger("swipeleft");break;case Mediasite.SwipeDirection.Right:i.trigger("swiperight");break;default:return}i.trigger("swipe",{direction:n})}function isSingleTouch(n){if(window.navigator.msPointerEnabled)return n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&n.pointerType!=="mouse"&&n.isPrimary;var t=n.originalEvent;return t&&t.touches&&t.touches.length===1}function getSingleTouchPagePosition(n){if(window.navigator.msPointerEnabled)return new Mediasite.Geometry.Point(n.pageX,n.pageY);var t=n.originalEvent;return new Mediasite.Geometry.Point(t.touches[0].pageX,t.touches[0].pageY)}var i,t=null;init()},Mediasite.SwipeTracker=function(n){function trimExpiredSpots(){while(t.length>2)if(getTimeDelta()>f)t.shift();else break}function getPositionDelta(){if(t.length<1)return new Mediasite.Geometry.Point(0,0);var i=getOldestSpot(),n=getNewestSpot();return new Mediasite.Geometry.Point(n.position.x()-i.position.x(),n.position.y()-i.position.y())}function getTimeDelta(){return t.length<1?0:getNewestSpot().time.getTime()-getOldestSpot().time.getTime()}function getNewestSpot(){return t[t.length-1]}function getOldestSpot(){return t[0]}function calculate(){var e=getTimeDelta(),n,t,f;if(e<=0){i=Mediasite.SwipeDirection.None;return}if(n=getPositionDelta(),t=Math.max(Math.abs(n.x()),Math.abs(n.y())),t<r){i=Mediasite.SwipeDirection.None;return}if(f=t/e,f<u){i=Mediasite.SwipeDirection.None;return}i=deltaToSwipeDirection(n)}function deltaToSwipeDirection(n){return Math.abs(n.x())>=Math.abs(n.y())?n.x()>0?Mediasite.SwipeDirection.Right:Mediasite.SwipeDirection.Left:n.y()>0?Mediasite.SwipeDirection.Down:Mediasite.SwipeDirection.Up}function Spot(n,t){this.position=n,this.time=t}var e=n||new Mediasite.nowProvider,f=500,r=50,u=500/1e3,i=Mediasite.SwipeDirection.None,t=[];this.getDetectedSwipe=function(){return i},this.reportPosition=function(n){t.push(new Spot(n,e.now())),trimExpiredSpots(),calculate()}},Mediasite.SwipeDirection={None:"None",Left:"Left",Right:"Right",Up:"Up",Down:"Down"},Mediasite.nowProvider=function(){this.now=function(){return new Date}}
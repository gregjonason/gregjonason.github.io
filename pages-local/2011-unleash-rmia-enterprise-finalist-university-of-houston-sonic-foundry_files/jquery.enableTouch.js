(function(n){n.extend(n.support,{touch:"ontouchstart"in document}),n.fn.enableTouch=function(){function simulateMouseEvent(n,t,i,r,u){r||(r=0),u||(u=0);var f=document.createEvent("MouseEvent");f.initMouseEvent(t,!0,!0,window,1,n.screenX+r,n.screenY+u,n.clientX+r,n.clientY+u,!1,!1,!1,!1,i,null),n.target.dispatchEvent(f)}function touchHandler(i){var o=i.originalEvent,r="",e=o.changedTouches[0];if(!(o.touches.length>1)){switch(i.type){case"touchstart":return n(i.target).is("select")?void 0:(startTouch(e),i.preventDefault(),!1);case"touchmove":cancelHold(),r="mousemove",i.preventDefault();break;case"touchend":if(f)return f=!1,i.preventDefault(),!1;cancelHold(),r="mouseup";break;default:return}simulateMouseEvent(e,r,0),r==="mouseup"&&t&&e.target===u&&simulateMouseEvent(e,"click",0)}}function startTouch(n){simulateMouseEvent(n,"mouseover",0),simulateMouseEvent(n,"mousedown",0),t?(clearTimeout(e),n.target===u?(u=null,t=!1,simulateMouseEvent(n,"click",0),simulateMouseEvent(n,"dblclick",0)):(u=n.target,t=!0,e=setTimeout(cancelTap,600),startHold(event))):(u=n.target,t=!0,e=setTimeout(cancelTap,600),startHold(n))}function startHold(n){r||(r=!0,i=n,o=setTimeout(rightClick,800))}function cancelHold(){r&&(clearTimeout(o),r=!1,i=null)}function cancelTap(){t=!1}function rightClick(){r=!1,simulateMouseEvent(i,"mouseup",0),simulateMouseEvent(i,"mousedown",2),simulateMouseEvent(i,"contextmenu",2,50,5),f=!0,i=null}var u=null,t=!1,e=null,r=!1,i=null,o=null,f=!1;return n.support.touch&&this.each(function(t,i){var r=n(i);r.bind("touchstart",touchHandler),r.bind("touchmove",touchHandler),r.bind("touchend",touchHandler),r.bind("touchcancel",touchHandler)}),this}})(jQuery)
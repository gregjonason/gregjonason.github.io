(function(n){function setup(u,f){var o=u.data(t.dataKey),e=n.extend({},r,o,f);u.data(t.dataKey,e),e.text=e.text||u.text(),e.words=e.text.split(i),e.maxHeight=e.container?n(e.container).height():u.height(),reflow(u)}function reflow(n){var r=n.data(t.dataKey),u,o,f,e;if(n.text(r.text),n.removeClass(r.overflowClass),r.title&&n.removeAttr("title"),!(n.height()<1))for(u=o=r.words.length-1,f=!1;u>0&&n.outerHeight()>r.maxHeight;)f||(n.addClass(r.overflowClass),r.title&&n.attr("title",r.text),f=!0),u--,e=r.words.slice(0,u).join(i),n.text(e)}var r={overflowClass:"ellipsis",container:null,title:!1},t={dataKey:"textOverflow"},i;n.extend(n.fn,{textOverflow:function(){var i=arguments;return this.each(function(){var e=n(this),s=e.data(t.dataKey),o,f;if(s||(f=n.isPlainObject(i[0])?arguments[0]:null,setup(e,f)),typeof i[0]=="string"){o=i[0].toLowerCase();switch(o){case"update":f=i[1],setup(e,f);break;case"reflow":reflow(e)}}}),this}}),i=" "})(jQuery)